import serial
import subprocess
import time

start = time.time()

ser = serial.Serial('COM3', baudrate=9600, timeout=15)


board = input("Enter board\n")
solve = subprocess.Popen(['solve.exe', board.upper()],
                         stdout=subprocess.PIPE, stderr=subprocess.PIPE)
out, err = solve.communicate()
print(out.decode('utf-8'))

# out = b'21302011120302\n33222111120302\n021122211203\n213020111203\n112221120302\n112233231202\n223332312030\n213120111203\n203121120302\n112122120302\n232213120302\n332221111203\n332221120302\n132211120302\n132221120302\n011202112221\n1121221203\n3322211203\n2131201102\n3322111202\n1122211203\n3322121102\n2322211202\n1122332312\n1122332332\n1202112233\n3121121122\n3021120211\n2031211203\n1312030211\n2031211102\n3021120302\n1322111202\n1322111203\n1322211203\n0312211110\n0211223130\n0211223132\n0211223120\n0212031322\n3323221102\n0211221312\n2322120302\n0112213020\n0112112031\n2322131203\n0312213020\n0312021122\n2322131202\n2213120302\n23221102\n23121102\n21120102\n30211202\n23120211\n23221202\n23221112\n23120302\n20312111\n30211203\n13223233\n23121110\n22211203\n22131203\n13120211\n22211102\n21312011\n23222112\n21302031\n23221312\n22211202\n21120211\n22233231\n22312010\n23221203\n21221312\n21221202\n21221102\n21121102\n03120102\n11223323\n33221112\n11222120\n11221202\n11213130\n11213120\n33221211\n03121302\n03121102\n03120211\n33221120\n33231221\n33232211\n02121120\n02112233\n02112231\n02112221\n02111221\n01121110\n01121102\n01120211\n33221102\n13221202\n30312010\n13221112\n13121122\n13121102\n13120302\n12211102\n31211202\n11223332\n12030211\n333231\n011202\n232231\n332211\n232212\n303120\n232232\n312011\n332332\n332221\n312030\n332322\n232233\n302031\n332232\n233233\n332231\n312112\n332223\n232221\n031223\n122111\n121322\n121110\n120302\n120211\n112233\n112221\n112212\n112131\n112122\n111221\n111202\n122130\n031222\n031221\n031213\n031211\n031202\n031201\n021221\n021213\n021211\n021203\n011211\n212212\n231221\n231211\n231203\n231202\n223120\n222112\n222111\n221202\n213132\n213130\n213120\n212233\n232211\n212211\n211211\n211201\n203132\n203130\n203122\n203121\n203031\n132221\n132212\n131211\n'
out = out.decode('utf-8').replace("\r", "").split('\n')

ser.write(b"00\n")
ser.readline().decode('utf-8')
ser.readline().decode('utf-8')

for word in out:
    if time.time() - start >= 80:
        break
    print(word)
    # if len(word.split()[1]) > 5:
    #     continue
    word = word.split()[0]
    ser.write(word.encode('utf-8') + b"\n")
    print(ser.readline().decode('utf-8'))
